{"version":3,"file":"src_app_done_done_module_ts.js","mappings":"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","sources":["./src/app/done/done.module.ts","./src/app/done/done.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DonePage } from './done.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DonePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DonePage]\n})\nexport class DonePageModule {}\n","import { Component, OnInit,ViewChild, ElementRef, Renderer2, Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { ServerService } from '../service/server.service';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\nimport { ToastController,NavController,Platform,LoadingController } from '@ionic/angular';\nimport { mapStyle } from '../service/mapStyle.js';\ndeclare var google;\n\n@Component({\n  selector: 'app-done',\n  templateUrl: './done.page.html',\n  styleUrls: ['./done.page.scss'],\n})\nexport class DonePage implements OnInit {\n\n@ViewChild('map',{static:false}) mapElement: ElementRef;\n@ViewChild('directionsPanel',{static:false}) directionsPanel: ElementRef;\n\n data:any;\n text:any;\n currency:any;\n status:number = 0; \n type: any;\n map: any;\n progress:number = 0.016;\n address:any;\n Interval_1:any;\n Intervarl_2:any;\n chargeMap: boolean = false;\n marker: any;\n km_h = 50;\n  constructor(\n    public toastController: ToastController,\n    private nav: NavController,\n    public server : ServerService,\n    public geolocation: Geolocation,\n    public nativeGeocoder: NativeGeocoder,\n    public renderer: Renderer2,\n    @Inject(DOCUMENT) private _document\n    ) { }\n\n  ngOnInit() \n  {\n\n   \n   this.data   = JSON.parse(localStorage.getItem('order_data'));\n   this.text   = JSON.parse(localStorage.getItem('app_text'));\n   this.currency = this.data.currency;\n   this.data   = this.data.data;\n   \n\n   this.getStatus();\n  this.Interval_1 = setInterval(() => {      \n  \n    this.progress = 0.016;\n    this.getStatus();\n  \n  },4000);\n\n  this.Intervarl_2 = setInterval(() => {      \n  \n    this.progress = (this.progress*1) + 0.016;\n\n  },6000);\n\n  }\n\n  getStatus()\n  {\n    this.server.getStatus(this.data.id).subscribe((response:any) => {\n    this.status = response.data.status;\n    this.type   = response.data.type;\n\n    if(this.status == 4)\n    {\n      localStorage.setItem(\"lat_dboy\",response.dboy.lat);\n      localStorage.setItem('lng_dboy',response.dboy.lng);\n      if (this.chargeMap == false) {\n        this.chargeMap = true;\n        this.loadMap();\n      }else {\n        this.ViewdBoy();\n      }\n    }\n\n    if(this.status == 2)\n    {\n      this.presentToast(\"¡Lo siento! Su pedido ha sido cancelado.\");\n      this.nav.navigateRoot('order');  \n      clearInterval(this.Interval_1);\n      clearInterval(this.Intervarl_2);\n    }\n\n    if(this.status == 5)\n    {\n      this.presentToast(\"Pedido entregado con éxito\");\n      localStorage.removeItem('menu_item');\n      localStorage.removeItem('order_data');\n      clearInterval(this.Interval_1);\n      clearInterval(this.Intervarl_2);\n      if (this.type == 1) {\n        this.nav.navigateRoot('rate/'+this.data.id+'/staff');  \n      }else {\n        this.nav.navigateRoot('rate/'+this.data.id+'/store');\n      }\n      \n    }\n\n    });\n  }\n\n  getColor(id)\n  {\n    if(id == 1)\n    {\n      if(this.status < 1)\n      {\n        return \"medium\";\n      }\n    }\n    if(id == 1.5)\n    {\n      if(this.status < 1.5)\n      {\n        return \"medium\";\n      }\n    }\n    else if(id == 3)\n    {\n      if(this.status < 3)\n      {\n        return \"medium\";\n      }\n    }\n    else if(id == 4)\n    {\n      if(this.status < 4)\n      {\n        return \"medium\";\n      }\n    }\n    else if(id == 7)\n    {\n      if(this.type < 7)\n      {\n        return \"medium\";\n      }\n    }\n\n    return \"primary\";\n  }\n\n  async loadMap() {\n    console.log(this.status);\n    let lat = localStorage.getItem('lat_dboy');\n    let lng = localStorage.getItem('lng_dboy');\n    this.getAddressFromCoords(lat,lng);\n    \n    const icon = {\n      url: 'assets/d.png', // image url\n      scaledSize: new google.maps.Size(50, 50), // scaled size\n    };\n    \n    let latLng = new google.maps.LatLng(lat, lng);\n    let mapOptions = {\n      center: latLng,\n      zoom: 15,\n      disableDefaultUI: true,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n      styles: mapStyle\n    }\n    \n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n\n    google.maps.event.addListenerOnce(this.map, 'idle', () => {\n      this.marker = new google.maps.Marker({\n        position: latLng,\n        map: this.map,\n        icon: icon,\n        title: this.address\n      });\n    });\n  \n  }\n\n  async ViewdBoy() {\n    let lat = localStorage.getItem('lat_dboy');\n    let lng = localStorage.getItem('lng_dboy');\n    this.getAddressFromCoords(lat,lng);\n    let latLng = new google.maps.LatLng(lat, lng);\n    this.map.setCenter(latLng);\n    this.marker.setPosition(latLng);\n\n  }\n\n  async getAddressFromCoords(lattitude, longitude) {\n    let $this = this;\n    var geocoder = new google.maps.Geocoder;\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 5\n    };\n \n    this.nativeGeocoder.reverseGeocode(lattitude, longitude, options)\n      .then((result: NativeGeocoderResult[]) => {\n        this.address = \"\";\n\n        let responseAddress = [];\n        for (let [key, value] of Object.entries(result[0])) {\n  \n          if(value.length > 0)\n          responseAddress.push(value);\n \n        }\n\n        responseAddress.reverse();\n        for (let value of responseAddress) {\n          this.address += value+\", \";\n        }\n        this.address = this.address.slice(0, -2);\n      })\n      .catch((error: any) =>{ \n        var latlng = {lat: parseFloat(lattitude), lng: parseFloat(longitude)};\n        let responseAddress = [];\n        geocoder.geocode({'location': latlng}, function(result, status) {\n          if (status === 'OK') {\n            \n            for (let [key, value] of Object.entries(result[0])) {\n              responseAddress.push(value); \n            }\n            responseAddress.reverse();\n            $this.address = responseAddress[4];\n          } else {\n           console.log(status);\n          }\n        });\n      });\n \n  }\n\n  async presentToast(txt) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 3000,\n      position : 'top',\n      mode:'ios',\n      color:'dark'\n    });\n    toast.present();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}