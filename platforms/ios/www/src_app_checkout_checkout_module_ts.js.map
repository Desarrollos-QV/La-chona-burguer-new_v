{"version":3,"file":"src_app_checkout_checkout_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEE;AAE/C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,wDAAY;KACxB;CACF,CAAC;IAWW,kBAAkB,SAAlB,kBAAkB;CAAG;AAArB,kBAAkB;IAT9B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,kEAAqB,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,wDAAY,CAAC;KAC7B,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBmB;AACQ;AACuC;AACX;AACpC;IAQrC,YAAY,SAAZ,YAAY;IA6BvB,YACS,MAAsB,EACtB,eAAgC,EAChC,iBAAoC,EACpC,eAAgC,EAC/B,GAAkB,EAClB,MAAc,EACd,MAAc;QANf,WAAM,GAAN,MAAM,CAAgB;QACtB,oBAAe,GAAf,eAAe,CAAiB;QAChC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,QAAG,GAAH,GAAG,CAAe;QAClB,WAAM,GAAN,MAAM,CAAQ;QACd,WAAM,GAAN,MAAM,CAAQ;QAxBxB,eAAU,GAAG,KAAK,CAAC;QAWnB,UAAK,GAAU,CAAC,CAAC;QAiBf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QAEvD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;QAC9C,IAAI,CAAC,WAAW,GAAK,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;IAC9C,CAAC;IAED,QAAQ;IAGR,CAAC;IAED,gBAAgB;QAEd,IAAG,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,MAAM,EAChF;YACE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAEhC,IAAI,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;SACjD;aAED;YAEE,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;IACH,CAAC;IAGD,OAAO,CAAC,IAAI;QAEV,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,EAAE;YAC1B,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC9E,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;SAC9B;aAAK;YACJ,IAAI,IAAI,CAAC,eAAe,IAAI,KAAK,EAAE;gBACjC,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aAC/E;SACF;QAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,OAAO;QAEL,IAAG,IAAI,CAAC,KAAK,IAAI,CAAC,EAClB;YACE,IAAG,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,EACjC;gBACE,OAAO,KAAK,CAAC;aACd;iBAED;gBACE,OAAO,IAAI,CAAC;aACb;SACF;aAED;YACE,IAAG,CAAC,IAAI,CAAC,OAAO,EAChB;gBACE,OAAO,KAAK,CAAC;aACd;iBAED;gBACE,OAAO,IAAI,CAAC;aACb;SACF;IACH,CAAC;IAED,UAAU,CAAC,IAAI;QAEb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAEjC,IAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,EACzB;YACE,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,EAAE;gBAC9B,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACzB;iBAAK;gBACJ,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;aACxB;SACF;aAED;YACE,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,EAAE;gBAC3B,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACxE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;aACzB;SACF;IACH,CAAC;IAEK,gBAAgB;;YACpB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,eAAe;gBACvB,OAAO,EAAE,+DAA+D,GAAC,IAAI,CAAC,WAAW,GAAC,IAAI;gBAC9F,IAAI,EAAC,KAAK;gBACV,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,UAAU;wBAChB,IAAI,EAAE,QAAQ;wBACd,QAAQ,EAAE,WAAW;wBACrB,OAAO,EAAE,CAAC,IAAI,EAAE,EAAE;4BAChB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;wBAC1B,CAAC;qBACF,EAAE;wBACD,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,GAAG,EAAE;4BAEZ,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;4BACzG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;wBACzB,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;IAED,OAAO,CAAC,KAAK,EAAC,IAAI;QAChB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAEK,QAAQ;;YAEb,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBACjD,OAAO,EAAE,oBAAoB;gBAC7B,IAAI,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YAExB,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAExF,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,GAAC,OAAO,GAAC,GAAG,GAAC,OAAO,GAAC,GAAG,GAAC,OAAO,GAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,QAAY,EAAE,EAAE;gBACnH,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC/C,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;oBAC1D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;oBAC5C,IAAI,CAAC,MAAM,GAAU,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBACvC,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,EAAE;wBAC3B,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;qBAChB;gBACH,CAAC,CAAC,CAAC;gBAEH,kCAAkC;gBAClC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,GAAC,WAAW,GAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,GAAC,SAAS,GAAC,IAAI,CAAC,QAAQ,GAAC,OAAO,GAAC,GAAG,GAAC,OAAO,GAAC,GAAG,GAAC,OAAO,GAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,QAAY,EAAE,EAAE;oBAEvL,IAAI,CAAC,IAAI,GAAW,QAAQ,CAAC,IAAI,CAAC;oBAClC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvB,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;wBACpC,0FAA0F;qBAC3F;yBAAK;wBACJ,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;qBACnC;oBACD,IAAI,CAAC,YAAY,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC1C,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC;oBACtE,IAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,EACtC;wBACE,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;wBACxD,IAAI,CAAC,UAAU,GAAK,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;qBACvD;oBAED,IAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAC9B;wBACI,IAAI,CAAC,SAAS,GAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC;qBACnD;oBAED,IAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAC9B;wBACE,IAAI,CAAC,SAAS,GAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC;qBACjD;gBACL,CAAC,CAAC,CAAC;gBAEJ,OAAO,CAAC,OAAO,EAAE,CAAC;YAEpB,CAAC,CAAC,CAAC;QACJ,CAAC;KAAA;IAED,SAAS;QAEP,IAAG,IAAI,CAAC,OAAO,IAAI,CAAC,EACpB;YACE,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;aACI,IAAG,IAAI,CAAC,OAAO,IAAI,CAAC,EACzB;YACE,IAAI,CAAC,aAAa,EAAE,CAAC;SAEtB;aAED;YACE,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;IACH,CAAC;IAEK,KAAK;;YAET,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAClD,OAAO,EAAE,oBAAoB;gBAC7B,IAAI,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YAExB,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAExF,IAAI,OAAO,GAAG;gBACV,OAAO,EAAG,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC;gBACzC,OAAO,EAAG,IAAI,CAAC,OAAO;gBACtB,OAAO,EAAG,IAAI,CAAC,OAAO;gBACtB,OAAO,EAAG,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC;gBACzC,UAAU,EAAG,IAAI,CAAC,UAAU;gBAC5B,KAAK,EAAG,IAAI,CAAC,KAAK;gBAClB,KAAK,EAAC,IAAI,CAAC,KAAK;gBAChB,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;aACX;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,QAAY,EAAE,EAAE;gBAEpD,IAAI,QAAQ,CAAC,IAAI,IAAI,aAAa,EAAE;oBAClC,OAAO,CAAC,OAAO,EAAE,CAAC;oBAClB,IAAI,CAAC,YAAY,CAAC,2CAA2C,CAAC,CAAC;iBAChE;qBAAK;oBAEJ,IAAI,MAAM,GAAI,EAAE,CAAC;oBACjB,IAAI,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;wBACrC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;wBACvD,IAAI,GAAG,GAAI,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;wBACjD,IAAI,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;4BACjC,MAAM,CAAC,IAAI,CAAC;gCACV,QAAQ,EAAE,IAAI,CAAC,QAAQ;6BACxB,CAAC,CAAC;yBACJ;qBACF;yBAAK;wBACJ,MAAM,CAAC,IAAI,CAAC;4BACV,QAAQ,EAAE,IAAI,CAAC,QAAQ;yBACxB,CAAC,CAAC;qBACJ;oBAED,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;oBAE1D,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;oBAClE,8BAA8B;oBAE9B,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;oBAE/B,OAAO,CAAC,OAAO,EAAE,CAAC;iBACnB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAED,SAAS;QAEL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACjB,2BAA2B,EAAE,IAAI,CAAC,SAAS;YAC3C,wBAAwB,EAAE,IAAI,CAAC,SAAS;SACvC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACX,kGAAkG;YAClG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,6BAA6B,EAAE,IAAI,yEAAmB,CAAC;YACjF,yEAAyE;YACzE,qEAAqE;aACtE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACZ,IAAI,OAAO,GAAG,IAAI,mEAAa,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC;gBACjF,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;oBAEtD,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC;oBAElC,IAAG,IAAI,CAAC,UAAU,EAClB;wBACE,IAAI,CAAC,KAAK,EAAE,CAAC;qBACd;gBAEH,CAAC,EAAE,GAAG,EAAE;oBAEN,IAAI,CAAC,YAAY,CAAC,8BAA8B,CAAC,CAAC;gBAEpD,CAAC,CAAC,CAAC;YACL,CAAC,EAAE,GAAG,EAAE;gBAEN,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;YAE9C,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,GAAG,EAAE;YACN,GAAG;YAED,IAAI,CAAC,YAAY,CAAC,uDAAuD,CAAC,CAAC;QAE/E,CAAC,CAAC,CAAC;IACP,CAAC;IAEK,aAAa;;YAEjB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACxD,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YAExB,IAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,GAAG,EAC1E;gBACI,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAE9C,IAAI,IAAI,GAAG;oBACV,MAAM,EAAE,IAAI,CAAC,OAAO;oBACpB,QAAQ,EAAE,IAAI,CAAC,SAAS;oBACxB,OAAO,EAAE,IAAI,CAAC,QAAQ;oBACtB,GAAG,EAAE,IAAI,CAAC,GAAG;iBACb;gBACD,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;qBAC9B,IAAI,CAAC,KAAK,CAAC,EAAE;oBACZ,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBAC7B,CAAC,CAAC;qBACD,KAAK,CAAC,KAAK,CAAC,EAAE;oBACf,IAAI,CAAC,YAAY,CAAC,4CAA4C,CAAC,CAAC;gBAEhE,CAAC,CAAC,CAAC;aACR;iBAED;gBACE,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,IAAI,CAAC,YAAY,CAAC,4CAA4C,CAAC,CAAC;aACjE;QACH,CAAC;KAAA;IAED,eAAe;QACb,IAAI,CAAC,YAAY,CAAC,qFAAqF,CAAC,CAAC;QACzG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IAEK,WAAW,CAAC,KAAK;;YAErB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAClD,OAAO,EAAE,yBAAyB;gBAClC,IAAI,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;YAExB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,SAAS,GAAC,KAAK,GAAC,UAAU,GAAC,IAAI,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,QAAY,EAAE,EAAE;gBAEvG,IAAG,QAAQ,CAAC,IAAI,IAAI,MAAM,EAC1B;oBACI,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,EAAE,CAAC;oBAE9B,IAAG,IAAI,CAAC,UAAU,EAClB;wBACE,IAAI,CAAC,KAAK,EAAE,CAAC;qBACd;iBACJ;qBAED;oBACE,IAAI,CAAC,YAAY,CAAC,iDAAiD,CAAC,CAAC;iBACtE;gBAED,OAAO,CAAC,OAAO,EAAE,CAAC;YAElB,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,GAAG;;YACpB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,OAAO,EAAE,GAAG;gBACZ,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAG,QAAQ;aACpB,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;CAEF;;YApaQ,kEAAa;YACb,2DAAe;YAAC,6DAAiB;YAAe,2DAAe;YAA7B,yDAAa;YAC/C,4DAAM;YACN,4DAAM;;AAQF,YAAY;IANxB,wDAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,qEAAmC;;KAEpC,CAAC;GAEW,YAAY,CAyZxB;AAzZwB","sources":["./src/app/checkout/checkout.module.ts","./src/app/checkout/checkout.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckoutPage } from './checkout.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckoutPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CheckoutPage]\n})\nexport class CheckoutPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ServerService } from '../service/server.service';\nimport { ToastController,LoadingController,NavController,AlertController } from '@ionic/angular';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal/ngx';\nimport { Stripe } from '@ionic-native/stripe/ngx';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.page.html',\n  styleUrls: ['./checkout.page.scss'],\n})\n\nexport class CheckoutPage implements OnInit {\n\n  data:any;\n  address:any;\n  payment:any;\n  payment_id : any;\n  total_amount:any;\n  paypal_id:any;\n  Cuenta_clave:any;\n  banco_name:any;\n  text:any;\n  stripe_id:any;\n  stripeView = false;\n  card_no:any;\n  exp_month:any;\n  exp_year:any;\n  cvv:any;\n  notes:any;\n  delivery_type:any;\n  pickup:any;\n  admin:any;\n  delivery_status: any;\n  delivery_charges: any;\n  otype:number = 1;\n  store_id:any;\n\n  send_terminal:any;\n  comm_stripe: any;\n  iva_stripe:any;\n  constructor(\n    public server : ServerService,\n    public toastController: ToastController,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    private nav: NavController,\n    private payPal: PayPal,\n    private stripe: Stripe,\n    \n  )\n  {\n    this.text = JSON.parse(localStorage.getItem('app_text'));\n    this.address = localStorage.getItem('address_id');\n    this.admin = JSON.parse(localStorage.getItem('admin'));\n    \n    this.send_terminal = this.admin.send_terminal;\n    this.comm_stripe   = this.admin.comm_stripe;\n  }\n\n  ngOnInit()\n  {\n  \n  }\n\n  ionViewWillEnter()\n  {\n    if(!localStorage.getItem('user_id') || localStorage.getItem('user_id') == 'null')\n    {\n      this.nav.navigateRoot('/login');\n\n      this.presentToast(\"Please login for continue.\");\n    }\n    else\n    {\n\n      this.loadData();\n    }\n  }\n\n\n  setType(data)\n  {\n    if (data.detail.value == 2) {\n      this.total_amount = Number(this.total_amount) - Number(this.delivery_charges);\n      this.delivery_status = false;\n    }else {\n      if (this.delivery_status == false) {\n        this.total_amount = Number(this.total_amount) + Number(this.delivery_charges);\n      }\n    }\n\n    this.otype = data.detail.value;\n    this.payment = false;\n    this.stripeView = false;\n  }\n\n  formVal()\n  {\n    if(this.otype == 1)\n    {\n      if(!this.address || !this.payment)\n      {\n        return false;\n      }\n      else\n      {\n        return true;\n      }\n    }\n    else\n    {\n      if(!this.payment)\n      {\n        return false;\n      }\n      else\n      {\n        return true;\n      }\n    }\n  }\n\n  setPayment(data)\n  {\n    this.payment = data.detail.value;\n\n    if(data.detail.value == 3)\n    {\n      if (this.send_terminal == true) {\n        this.ConfirmPayStripe();\n      }else {\n        this.stripeView = true;\n      }\n    }\n    else\n    {\n      if (this.stripeView == true) {\n        this.total_amount = Number(this.total_amount) - Number(this.iva_stripe);\n        this.stripeView = false;\n      }\n    }\n  }\n\n  async ConfirmPayStripe() {\n    const alert = await this.alertController.create({\n      header: 'Advertencia!!',\n      message: 'El pago via tarjeta de Crédito/Débito genera una comisión de '+this.comm_stripe+\" %\",\n      mode:'ios',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            this.stripeView = false;\n          }\n        }, {\n          text: 'Aceptar',\n          handler: () => {\n\n            this.total_amount = Number(this.total_amount) + Number(this.getComm(this.total_amount,this.comm_stripe));\n            this.stripeView = true;\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  getComm(total,comm) {\n    this.iva_stripe = Math.round((total * comm) / 100);\n    return Math.round(this.iva_stripe);\n  }\n\n  async loadData()\n  {\n  \tconst loading = await this.loadingController.create({\n      message: 'Espere porfavor...',\n      mode: 'ios'\n    });\n    await loading.present();\n\n    var lid = localStorage.getItem('lid') ? localStorage.getItem('lid') : 0;\n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\n\n    this.server.getCart(localStorage.getItem('cart_no')+\"?lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n     console.log(response);\n      this.store_id = response.data.data[0].store_id;  \n      this.server.getDeliveryType(this.store_id).subscribe(data => {\n        this.delivery_type = data[0][0].service_del;\n        this.pickup        = data[0][0].pickup;\n        if (this.delivery_type == 0) {\n          this.otype = 2;\n        }\n      });\n  \n      // localStorage.getItem('user_id')\n      this.server.getAddress(localStorage.getItem('user_id')+\"?cart_no=\"+localStorage.getItem('cart_no')+\"&store=\"+this.store_id+\"&lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n          \n          this.data         = response.data;\n          console.log(this.data);\n          if (response.data.address.length > 0) {\n            // this.address      = response.data.address[0].id; // Marcamos la primer opcion que tenga\n          }else {\n            this.nav.navigateRoot('/address');\n          }\n          this.total_amount = (response.data.total);\n          this.delivery_charges = response.data.Comercio.delivery_charges_value;\n          if(response.data.Comercio.Cuenta_clave)\n          {\n            this.Cuenta_clave = response.data.Comercio.Cuenta_clave;\n            this.banco_name   = response.data.Comercio.banco_name;\n          }\n          \n          if(this.admin.paypal_client_id)\n          {\n              this.paypal_id    = this.admin.paypal_client_id;\n          }\n\n          if(this.admin.stripe_client_id)\n          {\n            this.stripe_id    = this.admin.stripe_client_id;\n          }\n      });\n\n  \t  loading.dismiss();\n\n  \t});\n  }\n\n  makeOrder()\n  {\n    if(this.payment == 2)\n    {\n      this.payPaypal();\n    }\n    else if(this.payment == 3)\n    {\n      this.payWithStripe();\n      \n    }\n    else\n    {\n      this.order();\n    }\n  }\n\n  async order()\n  {\n    const loading = await this.loadingController.create({\n      message: 'Porfavor espere...',\n      mode: 'ios'\n    });\n    await loading.present();\n    \n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\n\n    var allData = {\n        user_id : localStorage.getItem('user_id'),\n        payment : this.payment,\n        address : this.address,\n        cart_no : localStorage.getItem('cart_no'),\n        payment_id : this.payment_id,\n        otype : this.otype,\n        notes:this.notes,\n        lat: lat,\n        lng: lng\n    }\n\n    this.server.order(allData).subscribe((response:any) => {\n     \n      if (response.data == 'Not_service') {\n        loading.dismiss();\n        this.presentToast('Sin servicio en la ubicación Seleccionada');\n      }else {\n        \n        let dataLS =  [];\n        if (localStorage.getItem('LastStore')) {\n          dataLS = JSON.parse(localStorage.getItem('LastStore'));\n          let has  = dataLS.find(id => id = this.store_id);\n          if (has.store_id != this.store_id) {\n            dataLS.push({\n              store_id: this.store_id\n            });\n          }\n        }else {\n          dataLS.push({\n            store_id: this.store_id\n          });\n        }\n\n        localStorage.setItem('LastStore', JSON.stringify(dataLS));\n\n        localStorage.setItem('order_data', JSON.stringify(response.data));\n        // Agregamos a ultimas ordenes\n\n        this.nav.navigateRoot('/done');\n\n        loading.dismiss();\n      }\n    });\n  }\n\n  payPaypal()\n  { \n      this.payPal.init({\n      PayPalEnvironmentProduction: this.paypal_id,\n      PayPalEnvironmentSandbox: this.paypal_id\n      }).then(() => {\n        // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n        this.payPal.prepareToRender('PayPalEnvironmentProduction', new PayPalConfiguration({\n          // Only needed if you get an \"Internal Service Error\" after PayPal login!\n          //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n        })).then(() => {\n          let payment = new PayPalPayment(this.total_amount, 'MXN', 'Description', 'sale');\n          this.payPal.renderSinglePaymentUI(payment).then((res) => {\n            \n            this.payment_id = res.response.id;\n\n            if(this.payment_id)\n            {\n              this.order();\n            }\n\n          }, () => {\n            \n            this.presentToast(\"Paypal Transaction Cancelled\");\n\n          });\n        }, () => {\n\n          this.presentToast(\"Error in configuration\");\n\n        });\n      }, () => {\n        // \n\n          this.presentToast(\"Error in initialization, maybe PayPal isn't supported\");\n\n      });\n  }\n\n  async payWithStripe()\n  {\n    const loading = await this.loadingController.create({});\n    await loading.present();\n\n    if(this.card_no.length > 10 && this.exp_month && this.exp_year && this.cvv)\n    {\n        loading.dismiss();\n        this.stripe.setPublishableKey(this.stripe_id);\n\n        let card = {\n         number: this.card_no,\n         expMonth: this.exp_month,\n         expYear: this.exp_year,\n         cvc: this.cvv\n        }\n        this.stripe.createCardToken(card)\n          .then(token => {\n            this.makePayment(token.id);\n          })\n          .catch(error => {\n          this.presentToast(\"Por favor ingrese detalles de pago válidos\");\n\n          });\n    }\n    else\n    {\n      loading.dismiss();\n      this.presentToast(\"Por favor ingrese detalles de pago válidos\");\n    }\n  }\n\n  payWithTransfer() {\n    this.presentToast(\"Una vez realizada la transferencia no te olvides de enviarle el ticket al comercio.\");\n    this.payment_id = 0;\n    this.order();\n  }\n\n  async makePayment(token)\n  {\n    const loading = await this.loadingController.create({\n      message: 'Enviando Informacion...',\n      mode: 'ios'\n    });\n    await loading.present();\n\n    this.server.makeStripePayment(\"?token=\"+token+\"&amount=\"+this.total_amount).subscribe((response:any) => {\n\n    if(response.data == \"done\")\n    {\n        this.payment_id = response.id;\n\n        if(this.payment_id)\n        {\n          this.order();\n        }\n    }\n    else\n    {\n      this.presentToast(\"Algo salió mal. Por favor, vuelva a intentarlo.\");\n    }\n\n    loading.dismiss();\n\n    });\n  }\n\n  async presentToast(txt) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 2000,\n      position : 'bottom'\n    });\n    toast.present();\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}