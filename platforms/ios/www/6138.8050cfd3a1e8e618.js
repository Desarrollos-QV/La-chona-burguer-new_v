"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6138],{6138:(q,C,r)=>{r.r(C),r.d(C,{AddressPageModule:()=>w});var f=r(9808),l=r(3075),O=r(3697),t=r(3349),M=r(655),u=r(1169),n=r(5e3),Z=r(6419),v=r(7618),A=r(1084);const b=["map"],T=[{path:"",component:(()=>{class a{constructor(o,e,i,s,g,P,_){this.route=o,this.server=e,this.toastController=i,this.nav=s,this.loadingController=g,this.geolocation=P,this.nativeGeocoder=_,this.text=JSON.parse(localStorage.getItem("app_text")),this.route.queryParams.subscribe(c=>{this.location=JSON.parse(c.location),this.lat=this.location.lat,this.lng=this.location.lng,this.address=c.address})}ngOnInit(){setTimeout(()=>{this.loadMap()},800)}loadMap(){return(0,M.mG)(this,void 0,void 0,function*(){const o=yield this.loadingController.create({});yield o.present();let i={center:new google.maps.LatLng(this.lat,this.lng),zoom:15,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:u.U};this.map=new google.maps.Map(this.mapElement.nativeElement,i),this.map.addListener("tilesloaded",()=>{this.getAddressFromCoords(this.map.center.lat(),this.map.center.lng())}),o.dismiss()})}getAddressFromCoords(o,e){return(0,M.mG)(this,void 0,void 0,function*(){var i=new google.maps.Geocoder;let s=this;this.nativeGeocoder.reverseGeocode(o,e,{useLocale:!0,maxResults:5}).then(P=>{this.address="";let _=[];for(let[c,d]of Object.entries(P[0]))d.length>0&&_.push(d);_.reverse();for(let c of _)this.address+=c+", ";this.address=this.address.slice(0,-2)}).catch(P=>{document.getElementById("addressPWA");var c={lat:parseFloat(o),lng:parseFloat(e)};let d=[];i.geocode({location:c},function(x,p){if("OK"===p){s.address="";for(let[h,y]of Object.entries(x[0]))d.push(y);d.reverse();for(let h of d)s.address+=h+", ";s.address=d[4]}else console.log("Geocoder failed due to: "+p)})})})}saveAddress(o){return(0,M.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({message:"Porfavor espere..."});yield e.present();var i={address:this.address,type:this.type_add,lat:this.map.center.lat(),lng:this.map.center.lng(),user_id:localStorage.getItem("user_id")};this.server.saveAddress(i).subscribe(s=>{"done"==s.msg?(localStorage.setItem("address",this.address),localStorage.setItem("address_id",s.id),localStorage.setItem("current_lat",this.map.center.lat()),localStorage.setItem("current_lng",this.map.center.lng()),this.nav.navigateForward("home"),this.presentToast("Direcci\xf3n guardada con \xe9xito.","success")):this.presentToast(JSON.stringify(s.data),"danger"),e.dismiss()})})}presentToast(o,e){return(0,M.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:o,duration:3e3,position:"top",mode:"ios",color:e})).present()})}}return a.\u0275fac=function(o){return new(o||a)(n.Y36(O.gz),n.Y36(Z.N),n.Y36(t.yF),n.Y36(t.SH),n.Y36(t.HT),n.Y36(v.b),n.Y36(A.d))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-address"]],viewQuery:function(o,e){if(1&o&&n.Gf(b,5),2&o){let i;n.iGM(i=n.CRH())&&(e.mapElement=i.first)}},decls:64,vars:2,consts:[["color","primary"],["slot","start"],["slot","end"],["shape","round","fill","outline",2,"font-size","12px",3,"click"],["slot","start","name","locate"],[1,"map-wrapper"],["id","map_center"],["src","assets/map-marker.png","width","30px"],["id","map"],["map",""],[3,"ngSubmit"],["form","ngForm"],[1,"footer_content"],[1,"form"],["lines","none"],[1,"item_inner","d-flex"],[1,"input_box"],["mode","md","position","stacked"],["name","address","disabled","",3,"ngModel","ngModelChange"],[1,"address_title"],["name","type_add",3,"ngModel","ngModelChange"],["size","4"],["slot","start","value","Hogar"],[1,"d-flex"],[1,"img_container"],[1,"img_box"],["src","assets/ic_homeblk.png"],["src","assets/ic_homewt.png"],["slot","start","value","Oficina"],["src","assets/ic_officeblk.png"],["src","assets/ic_officewt.png"],["slot","start","value","Otro"],["src","assets/ic_otherblk.png"],["src","assets/ic_otherwt.png"],["expand","full","mode","md","type","submit",1,"btn"]],template:function(o,e){if(1&o){const i=n.EpF();n.TgZ(0,"ion-header"),n.TgZ(1,"ion-toolbar",0),n.TgZ(2,"ion-buttons",1),n._UZ(3,"ion-back-button"),n.qZA(),n.TgZ(4,"ion-buttons",2),n.TgZ(5,"ion-button",3),n.NdJ("click",function(){return e.loadMap()}),n._UZ(6,"ion-icon",4),n._uU(7," Mi ubicaci\xf3n "),n.qZA(),n.qZA(),n._UZ(8,"ion-title"),n.qZA(),n.qZA(),n.TgZ(9,"ion-content"),n.TgZ(10,"div",5),n.TgZ(11,"div",6),n._UZ(12,"img",7),n.qZA(),n._UZ(13,"div",8,9),n.qZA(),n.qZA(),n.TgZ(15,"ion-footer"),n.TgZ(16,"form",10,11),n.NdJ("ngSubmit",function(){n.CHM(i);const g=n.MAs(17);return e.saveAddress(g.value)}),n.TgZ(18,"div",12),n.TgZ(19,"div",13),n.TgZ(20,"ion-list",14),n.TgZ(21,"ion-item",14),n.TgZ(22,"div",15),n.TgZ(23,"div",16),n.TgZ(24,"ion-label",17),n._uU(25,"Direcci\xf3n"),n.qZA(),n.TgZ(26,"ion-textarea",18),n.NdJ("ngModelChange",function(g){return e.address=g}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"div",19),n.TgZ(28,"h3"),n._uU(29,"Guardar Direcci\xf3n"),n.qZA(),n.TgZ(30,"ion-radio-group",20),n.NdJ("ngModelChange",function(g){return e.type_add=g}),n.TgZ(31,"ion-row"),n.TgZ(32,"ion-col",21),n.TgZ(33,"ion-item",14),n._UZ(34,"ion-radio",22),n.TgZ(35,"ion-label",23),n.TgZ(36,"div",24),n.TgZ(37,"div",25),n._UZ(38,"img",26),n._UZ(39,"img",27),n.qZA(),n.TgZ(40,"h2"),n._uU(41,"Hogar"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"ion-col",21),n.TgZ(43,"ion-item",14),n._UZ(44,"ion-radio",28),n.TgZ(45,"ion-label",23),n.TgZ(46,"div",24),n.TgZ(47,"div",25),n._UZ(48,"img",29),n._UZ(49,"img",30),n.qZA(),n.TgZ(50,"h2"),n._uU(51,"Oficina"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(52,"ion-col",21),n.TgZ(53,"ion-item",14),n._UZ(54,"ion-radio",31),n.TgZ(55,"ion-label",23),n.TgZ(56,"div",24),n.TgZ(57,"div",25),n._UZ(58,"img",32),n._UZ(59,"img",33),n.qZA(),n.TgZ(60,"h2"),n._uU(61,"Otro"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(62,"ion-button",34),n._uU(63,"Guardar direcci\xf3n"),n.qZA(),n.qZA(),n.qZA()}2&o&&(n.xp6(26),n.Q6J("ngModel",e.address),n.xp6(4),n.Q6J("ngModel",e.type_add))},directives:[t.Gu,t.sr,t.Sm,t.oU,t.cs,t.YG,t.gu,t.wd,t.W2,t.fr,l._Y,l.JL,l.F,t.q_,t.Ie,t.Q$,t.g2,t.j9,l.JJ,l.On,t.se,t.QI,t.Nd,t.wI,t.B7,t.U5],styles:['#map_canvas[_ngcontent-%COMP%]{width:90%;height:60%;border:1px solid #501BB3}#address[_ngcontent-%COMP%]{padding:0;font-size:18px;font-weight:700}.map-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}.map-wrapper[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:30px 0 0;transition:all .5s;background:#fff}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:0 20px 23px}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000!important;font-size:.73rem!important;font-weight:500;margin-bottom:10px!important;text-transform:uppercase;letter-spacing:.5px!important}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:7px 8px!important;border-radius:50px;transition:all .5s;background:#fff;margin:0}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:100%!important;position:relative;max-width:100%!important;white-space:normal;margin:0!important}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   .img_box[_ngcontent-%COMP%]{position:relative;width:23px;height:23px;overflow:hidden;margin-right:7px}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   .img_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:0;height:0;display:block}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   .img_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(odd){width:100%;height:auto}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:.9rem;color:#000;text-transform:none;position:relative;top:0px}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{position:absolute;z-index:999;width:100%;height:100%;margin:0;--color: transparent !important;--color-checked: transparent !important}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;bottom:0;right:0;width:0;height:0;margin:auto;background:#501BB3;transition:all .3s;border-radius:50px}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]{border-color:transparent!important}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]:before{width:100%;height:100%}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   .img_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(even){width:100%;height:auto}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   .img_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(odd){width:0;height:0}ion-footer[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .address_title[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .img_container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}ion-footer[_ngcontent-%COMP%]   .button.btn.btnA[_ngcontent-%COMP%]{display:none}ion-footer.active[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:block}ion-footer.active[_ngcontent-%COMP%]   .footer_content[_ngcontent-%COMP%]{height:314px}ion-footer.active[_ngcontent-%COMP%]   .button.btn.btnA[_ngcontent-%COMP%]{display:block}ion-footer.active[_ngcontent-%COMP%]   .button.btn.btnB[_ngcontent-%COMP%]{display:none}']}),a})()}];let w=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[f.ez,l.u5,t.Pc,O.Bz.forChild(T)]]}),a})()}}]);