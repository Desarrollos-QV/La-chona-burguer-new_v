"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[878],{878:(h,u,a)=>{a.r(u),a.d(u,{ForgotPageModule:()=>T});var d=a(9808),c=a(3075),m=a(3697),t=a(3349),l=a(655),e=a(5e3),p=a(6419);function Z(i,g){if(1&i){const o=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.MAs(1);return e.oxw().forgot(n.value)}),e.TgZ(2,"p",7),e._uU(3," ingrese su correo electr\xf3nico y le enviaremos instrucciones sobre c\xf3mo restablecerlo "),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"ion-row"),e.TgZ(6,"ion-col",8),e.TgZ(7,"span"),e._uU(8,"Email"),e.qZA(),e.qZA(),e.TgZ(9,"ion-col",9),e._UZ(10,"ion-input",10),e.qZA(),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"ion-button",11),e._uU(13,"Enviar"),e.qZA(),e._UZ(14,"br"),e.qZA()}}function _(i,g){if(1&i){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"ion-card-header"),e.TgZ(2,"ion-card-title"),e._uU(3,"Verifique su correo electr\xf3nico"),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"br"),e._UZ(7,"br"),e.TgZ(8,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.MAs(9);return e.oxw().verify(n.value)}),e.TgZ(10,"ion-item"),e.TgZ(11,"ion-label",12),e._uU(12,"Ingresa el codigo"),e.qZA(),e._UZ(13,"ion-input",13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"ion-button",11),e._uU(16,"Verificar"),e.qZA(),e.qZA(),e.TgZ(17,"p",14),e._uU(18,"No obtuviste el codigo? "),e.TgZ(19,"a",15),e.NdJ("click",function(){return e.CHM(o),e.oxw().resend()}),e._uU(20,"Reenviar"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const o=e.oxw();e.xp6(5),e.hij("Se ha enviado un codigo a su correo electr\xf3nico ",o.email,"")}}function f(i,g){if(1&i){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"ion-card-header"),e.TgZ(2,"ion-card-title"),e._uU(3,"Establecer nueva contrase\xf1a"),e.qZA(),e.qZA(),e._UZ(4,"br"),e._UZ(5,"br"),e.TgZ(6,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.MAs(7);return e.oxw().new_password(n.value)}),e.TgZ(8,"ion-item"),e.TgZ(9,"ion-label",12),e._uU(10,"Nueva contrase\xf1a "),e.qZA(),e._UZ(11,"ion-input",16),e.qZA(),e.TgZ(12,"ion-item"),e.TgZ(13,"ion-label",12),e._uU(14,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(15,"ion-input",17),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"ion-button",11),e._uU(18,"Actualizar"),e.qZA(),e.qZA(),e.TgZ(19,"p",14),e._uU(20,"No obtuviste el codigo? "),e.TgZ(21,"a",15),e.NdJ("click",function(){return e.CHM(o),e.oxw().resend()}),e._uU(22,"Reenviar"),e.qZA(),e.qZA(),e.qZA()}}const v=[{path:"",component:(()=>{class i{constructor(o,r,n,s){this.server=o,this.toastController=r,this.nav=n,this.loadingController=s,this.newPassword=!1,this.text=JSON.parse(localStorage.getItem("app_text"))}ngOnInit(){}forgot(o,r="new"){return(0,l.mG)(this,void 0,void 0,function*(){if("new"==r&&0==o.email.length)this.presentToast("Porfavor Ingresa un Correo electronico","warning");else{const n=yield this.loadingController.create({message:"Porfavor espere...",mode:"ios"});yield n.present(),this.server.forgot(o).subscribe(s=>{"error"==s.msg?this.presentToast(s.error,"danger"):(this.presentToast("El codigo de recuperaci\xf3n ha sido enviado","primary"),this.user_id=s.user_id,this.email=o.email),n.dismiss()})}})}verify(o){return(0,l.mG)(this,void 0,void 0,function*(){if(0==o.otp.length)this.presentToast("Porfavor ingresa el codigo.","warning");else{const n=yield this.loadingController.create({message:"Porfavor espera...",duration:3e3,mode:"ios"});yield n.present(),this.server.verify({otp:o.otp,user_id:this.user_id}).subscribe(s=>{"error"==s.msg?this.presentToast(s.error,"danger"):(this.user_id=s.user_id,this.newPassword=!0,this.presentToast("Correo verificado con exito.","success")),n.dismiss()})}})}new_password(o){return(0,l.mG)(this,void 0,void 0,function*(){if(0==o.password.length)this.presentToast("Porfavor ingresa tu nueva contrase\xf1a","warning");else if(o.password!=o.new_password)this.presentToast("Confirme que las contrase\xf1as coincidan.","warning");else{const n=yield this.loadingController.create({message:"Please wait...",duration:3e3,mode:"ios"});yield n.present(),this.server.updatePassword({password:o.password,user_id:this.user_id}).subscribe(s=>{"error"==s.msg?this.presentToast(s.error,"danger"):(this.nav.navigateForward("/city"),this.presentToast("Nueva contrase\xf1a actualizada con \xe9xito.","success")),n.dismiss()})}})}presentToast(o,r){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:o,duration:3e3,position:"top",mode:"ios",color:r})).present()})}resend(){this.forgot({email:this.email})}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(p.N),e.Y36(t.yF),e.Y36(t.SH),e.Y36(t.HT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-forgot"]],decls:10,vars:3,consts:[["color","white"],["slot","start"],[1,"ion-padding"],[3,"ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[2,"color","rgb(82, 82, 82)","font-family","SF Pro Display","font-weight","400","text-align","center"],["size","3",2,"margin-top","10.5px !important"],["size","9"],["type","email","ngModel","","clearInput","","required","","name","email","placeholder","Ingresa tu Email"],["expand","block","mode","ios","type","submit"],["position","floating",2,"font-size","12px"],["type","email","ngModel","","required","","name","otp"],["align","center"],[3,"click"],["type","password","ngModel","","required","","name","password"],["type","password","ngModel","","required","","name","new_password"]],template:function(o,r){1&o&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"\xbfOlvidaste tu contrase\xf1a?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content",2),e.YNc(7,Z,15,0,"form",3),e.YNc(8,_,21,1,"div",4),e.YNc(9,f,23,0,"div",4),e.qZA()),2&o&&(e.xp6(7),e.Q6J("ngIf",!r.user_id&&!r.newPassword),e.xp6(1),e.Q6J("ngIf",r.user_id&&!r.newPassword),e.xp6(1),e.Q6J("ngIf",r.user_id&&r.newPassword))},directives:[t.Gu,t.sr,t.Sm,t.oU,t.cs,t.wd,t.W2,d.O5,c._Y,c.JL,c.F,t.Nd,t.wI,t.pK,t.j9,c.JJ,c.On,c.Q7,t.YG,t.Zi,t.Dq,t.tO,t.Ie,t.Q$],styles:[""]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,c.u5,t.Pc,m.Bz.forChild(v)]]}),i})()}}]);