{"version":3,"file":"src_app_categorys_categorys_module_ts.js","mappings":"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","sources":["./src/app/categorys/categorys.module.ts","./src/app/categorys/categorys.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\n\nimport { CategorysPage } from './categorys.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CategorysPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CategorysPage]\n})\nexport class CategorysPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, IonContent, ModalController, LoadingController, ToastController } from '@ionic/angular';\nimport { NavigationExtras, ActivatedRoute } from '@angular/router';\nimport { ServerService } from '../service/server.service';\n\n@Component({\n  selector: 'app-categorys',\n  templateUrl: './categorys.page.html',\n  styleUrls: ['./categorys.page.scss'],\n})\nexport class CategorysPage implements OnInit {\n  text: any;\n  data: any;\n  SearchTitle: any = \"CategorÃ­as\";\n  SearchData = [];\n  loadBody: boolean = false;\n  fk_items = [];\n  count: any;\n  loadView: boolean = false;\n  constructor(\n    private route: ActivatedRoute,\n    private nav: NavController,\n    public server : ServerService,\n    public loadingController: LoadingController,\n    public toastController: ToastController\n  ) { \n    this.loadData(localStorage.getItem('city_id')+\"?ss=ss\", '');\n  }\n\n  ngOnInit() {\n    \n  }\n  \n  ionViewWillEnter()\n  {   \n    if (!localStorage.getItem('user_id')) {\n      this.nav.navigateRoot('/welcome');\n    }else {\n      if(localStorage.getItem('user_id') == 'null')\n      {\n        this.nav.navigateRoot('/welcome');\n      }\n    }\n\n    if(localStorage.getItem('app_text'))\n    {\n      this.text = JSON.parse(localStorage.getItem('app_text'));\n    }\n  }\n\n  viewAll() {\n    this.SearchData = [];\n    this.SearchTitle = 'Categorias';\n    this.loadData(localStorage.getItem('city_id')+\"?ss=ss\", '');\n  }\n\n  async loadData(city_id, cat)\n  {\n    const loading = await this.loadingController.create({});\n    await loading.present();\n\n    this.data = null;\n    this.SearchData = [];\n    this.fk_items = []; // Vaciamos\n    this.loadBody = false;\n    var lid = localStorage.getItem('lid') ? localStorage.getItem('lid') : 0;\n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\n\n    if (cat != '') {\n      this.server.SearchCat(city_id+\"&lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng+\"&cat=\"+cat).subscribe((response:any) => {\n        if (response.data.length == 0) {\n          this.SearchTitle = '';\n          this.loadBody = true;\n          this.loadView = true;\n        }else {\n          this.loadView = false\n          this.SearchTitle = response.cat;\n          this.SearchData = response.data;\n        }\n        loading.dismiss();\n      });\n    }else {\n      this.loadView = false;\n      this.server.homepage(city_id+\"&lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n        this.getTypeStore(response.data.Categorys);\n        loading.dismiss();\n      });\n    }\n    \n  }\n\n  getTypeStore(List_type: any) {\n    this.fk_items = []; // Limpiamos\n    List_type.forEach(element => {\n      if (element.status == 0) {\n        this.fk_items.push({'id' : element.id,'Name' : element.name,'Img' : element.img}); \n      }   \n    });\n\n    this.loadBody = true;\n  }\n\n  SearchColCategory(Cat) {\n    this.loadData(localStorage.getItem('city_id')+\"?ss=ss\", Cat);\n  }\n\n  itemPage(storeData)\n  {\n    if(storeData.open)\n    {\n      if (storeData.max_distance == 1) {\n        let navigationExtras: NavigationExtras = {\n          queryParams: {\n            store: storeData.title,\n            id: storeData.id\n          }\n        };\n    \n        this.nav.navigateForward(['/item'], navigationExtras);\n\n      }else {\n        this.presentToast(\"El comercio esta fuera de alcance.\",'danger');\n      }\n    }else {\n      this.presentToast(\"El comercio se encuentra cerrado.\",'danger');\n    }\n  }\n\n  async presentToast(txt,color) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 3000,\n      position : 'top',\n      mode:'ios',\n      color:color\n    });\n    toast.present();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}