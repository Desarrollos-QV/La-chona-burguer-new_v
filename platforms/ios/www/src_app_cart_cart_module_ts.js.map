{"version":3,"file":"src_app_cart_cart_module_ts.js","mappings":"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","sources":["./src/app/cart/cart.module.ts","./src/app/cart/cart.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ServerService } from '../service/server.service';\nimport { ToastController,Platform,LoadingController,NavController,ModalController } from '@ionic/angular';\nimport { OfferPage } from '../offer/offer.page';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n})\n\nexport class CartPage implements OnInit {\n\n  data:any;\n  dataAddress:any;\n  address_id:any;\n  fakeData: [1,2,3,4,5,6];\n  discount:any;\n  text:any;\n  cart_total: Number = 0;\n  Subtotal: Number = 0;\n  otype:number = 1;\n  delivery_type:any;\n  address: any;\n \n  constructor(public modalController: ModalController,public server : ServerService,public toastController: ToastController,public loadingController: LoadingController,private nav: NavController)\n  {\n   this.text = JSON.parse(localStorage.getItem('app_text'));\n  }\n\n  ionViewWillEnter()\n  {\n    this.address_id = localStorage.getItem('address_id');\n    \n    if(!localStorage.getItem('user_id') || localStorage.getItem('user_id') == 'null')\n    {\n      this.nav.navigateRoot('/login');\n\n      this.presentToast(\"Please login for continue.\");\n    }\n    else\n    {\n      this.loadData();\n    }\n  }\n\n  ngOnInit()\n  {\n  \t\n  }\n\n  async loadData()\n  {\n    var lid = localStorage.getItem('lid') ? localStorage.getItem('lid') : 0;\n    var lat = localStorage.getItem('current_lat') ? localStorage.getItem('current_lat') : 0;\n    var lng = localStorage.getItem('current_lng') ? localStorage.getItem('current_lng') : 0; \n\n  \tthis.server.getCart(localStorage.getItem('cart_no')+\"?lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n   \n      this.data = response.data;\n      this.cart_total = (response.data.total + Number(response.data.c_charges));\n      if (response.data.data[0]) {\n        var store_id = response.data.data[0].store_id;  \n        this.server.getDeliveryType(store_id).subscribe(data => {\n          this.delivery_type = data[0][0].service_del;\n          if (this.delivery_type == 0) {\n            this.otype = 2;\n          }\n        });\n      }\n      // localStorage.getItem('user_id')\n      this.server.getAddress(localStorage.getItem('user_id')+\"?cart_no=\"+localStorage.getItem('cart_no')+\"&store=\"+store_id+\"&lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n        this.dataAddress         = response.data;\n        if (response.data.address.length > 0) {\n          \n          for (let x = 0; x < response.data.address.length; x++) {\n            const element = response.data.address[x];\n            \n            if (element.id == this.address_id) {\n              this.address = element;\n            }\n          }\n\n        }else {\n          this.nav.navigateRoot('/setaddress');\n        }\n      });\n    });\n  }\n\n  removeAddress(id) {\n    this.server.trashAddress(id).subscribe(data => {\n        if (data) {\n          this.presentToast(\"La dirección se ha eliminado...\");\n          this.ionViewWillEnter();\n        }else {\n          this.presentToast(data);\n        }\n    });\n  }\n\n  async updateCart(id,type)\n  {\n    const loading = await this.loadingController.create({\n      mode:'ios'\n    });\n    await loading.present();\n\n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\n\n    this.server.updateCart(id,type+\"?lid=\"+localStorage.getItem('lid')+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n      console.log(response);\n      this.data = response.data;\n      this.cart_total = (response.data.total + Number(response.data.c_charges));\n      loading.dismiss();\n    });\n  }\n \n  async presentToast(txt) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 2000,\n      position : 'bottom'\n    });\n    toast.present();\n  }\n\n  async coupen() {\n    const modal = await this.modalController.create({\n      component: OfferPage,\n      animated:true,\n      mode:'ios',\n      cssClass: 'my-custom-modal-css',\n      backdropDismiss:false,\n    });\n\n   modal.onDidDismiss().then(data=>{\n   \n    if(data.data.id)\n    {\n      this.applyCoupen(data.data.id);\n    }\n\n    })\n\n    return await modal.present();\n  }\n\n  async applyCoupen(id)\n  {\n    const loading = await this.loadingController.create({\n        message: 'Aplicacndo Cúpon',\n        mode:'ios'\n      });\n      await loading.present();\n\n      var lid = localStorage.getItem('lid') ? localStorage.getItem('lid') : 0;\n      var lat = localStorage.getItem('current_lat') ? localStorage.getItem('current_lat') : 0;\n      var lng = localStorage.getItem('current_lng') ? localStorage.getItem('current_lng') : 0; \n\n      this.server.applyCoupen(id,localStorage.getItem('cart_no')+\"?lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n      console.log(response);\n      if(response.msg == \"done\")\n      {\n        this.data = response.data;\n      }\n      else\n      {\n        this.presentToast(response.msg);\n      }\n      \n      loading.dismiss();\n\n      });\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}