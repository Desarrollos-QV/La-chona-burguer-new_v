"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4092],{4092:(v,u,s)=>{s.r(u),s.d(u,{CityPageModule:()=>f});var c=s(9808),g=s(3075),y=s(3697),o=s(3349),l=s(655),t=s(5e3),h=s(6419);function p(a,r){if(1&a&&(t.TgZ(0,"ion-title"),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.text.city_title)}}function m(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"ion-radio-group",8),t.NdJ("ionChange",function(n){const x=t.CHM(e).$implicit;return t.oxw(2).setCity(n,x.name)}),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label"),t._uU(3),t.qZA(),t._UZ(4,"ion-radio",9),t.qZA(),t.qZA()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.s9C("value",i.cityID),t.xp6(3),t.Oqu(e.name),t.xp6(1),t.s9C("value",e.id)}}function _(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"ion-content",4),t.TgZ(1,"ion-searchbar",5),t.NdJ("ionInput",function(n){return t.CHM(e),t.oxw().search(n)}),t.qZA(),t.TgZ(2,"ion-list"),t.TgZ(3,"ion-list-header"),t.TgZ(4,"ion-label"),t._uU(5),t.qZA(),t.qZA(),t.YNc(6,m,5,3,"ion-radio-group",6),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"ion-button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().city()}),t._uU(9),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.s9C("placeholder",e.text.city_search),t.xp6(4),t.Oqu(e.text.city_heading),t.xp6(1),t.Q6J("ngForOf",e.data),t.xp6(2),t.Q6J("disabled",!e.cityID),t.xp6(1),t.Oqu(e.text.city_button)}}const C=[{path:"",component:(()=>{class a{constructor(e,i,n,d){this.server=e,this.toastController=i,this.loadingController=n,this.nav=d,this.heading="Porfavor selecciona tu ciudad para continuar.",localStorage.getItem("city_id")&&(this.cityID=localStorage.getItem("city_id"),this.cityName=localStorage.getItem("city_name"),this.heading="Want to change your city? Select & continue."),this.text=JSON.parse(localStorage.getItem("app_text"))}ngOnInit(){this.loadData()}loadData(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({message:"Cargando Ciudades Disponibles...",mode:"ios"});yield e.present(),this.server.city().subscribe(i=>{this.data=i.data,this.text=i.text,this.OrderAz(this.data),e.dismiss()})})}OrderAz(e){e.sort(function(i,n){return i.name.localeCompare(n.name)})}presentToast(e){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:e,duration:2e3,position:"top"})).present()})}search(e){var i=e.target.value;if(!(i&&i.length>0))return this.loadData();i&&""!=i.trim()&&(this.data=this.data.filter(n=>n.name.indexOf(i)>-1))}setCity(e,i){this.cityID=e.detail.value,this.cityName=i}city(){return(0,l.mG)(this,void 0,void 0,function*(){if(this.cityID)if(localStorage.getItem("user_id")&&"null"!=localStorage.getItem("user_id")){localStorage.setItem("city_id",this.cityID),localStorage.setItem("city_name",this.cityName);const e=yield this.loadingController.create({message:"Porfavor espere...",duration:3e3});yield e.present(),this.presentToast("Ciudad actualizada exitosamente."),this.nav.navigateRoot("/home"),e.dismiss(),this.server.updateCity("id="+localStorage.getItem("user_id")+"&city_id="+this.cityID).subscribe(i=>{})}else localStorage.setItem("city_id",this.cityID),localStorage.setItem("city_name",this.cityName),this.presentToast("City Updated Successfully."),this.nav.navigateRoot("/home");else this.presentToast("Por favor seleccione ciudad para continuar.")})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.N),t.Y36(o.yF),t.Y36(o.HT),t.Y36(o.SH))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-city"]],decls:6,vars:2,consts:[["color","white"],["slot","start"],[4,"ngIf"],["padding","true",4,"ngIf"],["padding","true"],["mode","ios","color","light",3,"placeholder","ionInput"],[3,"value","ionChange",4,"ngFor","ngForOf"],["expand","block","size","large","type","button","mode","ios","color","primary",3,"disabled","click"],[3,"value","ionChange"],["slot","start","color","primary",3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.YNc(4,p,2,1,"ion-title",2),t.qZA(),t.qZA(),t.YNc(5,_,10,5,"ion-content",3)),2&e&&(t.xp6(4),t.Q6J("ngIf",i.text),t.xp6(1),t.Q6J("ngIf",i.text))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,c.O5,o.wd,o.W2,o.VI,o.j9,o.q_,o.yh,o.Q$,c.sg,o.YG,o.se,o.QI,o.Ie,o.B7,o.U5],styles:[""]}),a})()}];let f=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.ez,g.u5,o.Pc,y.Bz.forChild(C)]]}),a})()}}]);